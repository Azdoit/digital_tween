# 🚀 数字孪生平台启动说明

## 📋 项目结构
```
DT_project/
├── src/                    # 前端Vue.js代码
├── backend/               # 后端Python代码
├── sailisi/               # 智能问答服务
│   ├── main.py           # 赛力斯综合问答服务（RAG+KG+CSV+LLM）
│   ├── csv_qa_server.py   # CSV数据问答服务
│   └── graph_qa_server.py # Graph知识图谱问答服务
├── package.json           # 前端依赖
├── start.bat             # Windows启动脚本
├── start_sailisi_main.bat # 赛力斯综合问答服务启动脚本
├── start_csv_qa.bat      # CSV问答服务启动脚本
├── start_graph_qa.bat    # Graph问答服务启动脚本
└── 启动说明.md           # 本文件
```

## 🎯 快速启动

### 方法一：使用启动脚本（推荐）
1. 双击运行 `start.bat`
2. 等待两个服务器启动完成
3. 浏览器会自动打开前端页面

### 方法二：手动启动

#### 1. 启动后端
```bash
cd backend
pip install -r requirements.txt
python main.py
```

#### 2. 启动前端
```bash
npm install
npm run dev
```

## 🌐 访问地址

- **前端页面**: http://localhost:3000
- **后端API**: http://localhost:8000
- **API文档**: http://localhost:8000/docs
- **健康检查**: http://localhost:8000/api/health

### 智能问答服务
- **赛力斯综合问答服务**: http://localhost:83
  - 问答接口: POST http://localhost:83/api/knowledge
  - 刷新历史: POST http://localhost:83/api/refresh
- **CSV问答服务**: http://localhost:5001
  - 健康检查: http://localhost:5001/health
  - 问答接口: POST http://localhost:5001/ask
- **Graph问答服务**: http://localhost:5002
  - 健康检查: http://localhost:5002/health
  - 问答接口: POST http://localhost:5002/ask
  - Schema查询: GET http://localhost:5002/schema

## 🔧 功能说明

### 前端功能
- ✅ 仪表板：设备状态监控
- ✅ 智能问答：AI聊天功能（支持赛力斯、Graph和CSV三种模式）
- ✅ 视频监控：摄像头管理
- ✅ 设备状态：详细设备信息

### 后端API
- ✅ 设备数据：获取设备状态
- ✅ 智能问答：AI响应处理
- ✅ 监控数据：摄像头信息
- ✅ 统计数据：仪表板数据

### 智能问答服务
- ✅ **赛力斯智能问答**：综合问答服务，集成多种数据源
  - RAG文档检索：基于向量数据库的文档检索
  - 知识图谱问答：调用Neo4j图数据库查询
  - CSV数据分析：结构化数据查询分析
  - 大模型回答生成：使用DeepSeek-V3生成自然语言回答
  - 流式响应：实时返回处理进度和结果
- ✅ **CSV数据问答**：基于CSV文件的数据查询和分析
- ✅ **Graph知识图谱问答**：基于Neo4j知识图谱的语义问答
  - 支持自然语言转Cypher查询
  - 支持实体识别和关系查询
  - 集成大模型生成自然语言回答

## 🐛 常见问题

### 1. 端口被占用
- 检查3000、8000、83、5001、5002端口是否被其他程序占用
- 关闭占用端口的程序或修改端口号

### 0. 智能问答服务启动
#### 赛力斯综合问答服务
```bash
# 双击运行
start_sailisi_main.bat
# 或手动启动
cd sailisi
python main.py
```

**注意**: 赛力斯服务需要以下依赖：
- Neo4j数据库运行在 `bolt://192.168.200.47:7687`
- 用户名: `neo4j`，密码: `idt123456`
- 相关CSV文件和文档切片
- 向量数据库初始化

#### CSV问答服务
```bash
# 双击运行
start_csv_qa.bat
# 或手动启动
cd sailisi
python csv_qa_server.py
```

#### Graph问答服务  
```bash
# 双击运行
start_graph_qa.bat
# 或手动启动
cd sailisi
python graph_qa_server.py
```

**注意**: Graph问答服务需要连接Neo4j数据库，请确保：
- Neo4j数据库运行在 `bolt://192.168.200.47:7687`
- 用户名: `neo4j`，密码: `idt123456`
- 数据库中已导入相关知识图谱数据

### 2. Python依赖安装失败
```bash
# 升级pip
python -m pip install --upgrade pip

# 重新安装依赖
pip install -r requirements.txt
```

### 3. 前端无法连接后端
- 确保后端服务器已启动
- 检查浏览器控制台是否有CORS错误
- 确认API地址配置正确

### 4. 数据不显示
- 检查浏览器网络面板
- 查看API请求是否成功
- 确认后端返回数据格式正确

## 📚 学习资源

- **Vue.js**: https://vuejs.org/
- **FastAPI**: https://fastapi.tiangolo.com/
- **Arco Design**: https://arco.design/vue/

## 🆘 技术支持

如果遇到问题，请检查：
1. 控制台错误信息
2. 网络请求状态
3. 服务器日志

祝你使用愉快！🎉
